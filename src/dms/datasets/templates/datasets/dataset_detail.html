{% extends 'app.html' %}
{% load rules %}
{% load static %}
{% load language_tags %}
{% load i18n %}
{% block article %}
{% load render_table from django_tables2 %}


<div class="flex items-center justify-between">
    <div>
        <h1 class="text-4xl font-bold">{{ dataset }}</h1>
        <p class="text-sm text-gray-700">
            Created at: {{dataset.created_at}} &bull;
            Last Modified: {{dataset.last_modified_at}}
        </p>
    </div>
    <div class="flex gap-4">
        {% if dataset.project %}<a class="btn btn-primary" href="{% url 'projects:project_detail' pk=dataset.project_id %}">Project</a>{% endif %}
        <a class="btn btn-primary" href="{% url 'datasets:dataset_update' pk=dataset.id %}">Edit</a>
        <a class="btn btn-primary" href="{% url 'datasets:dataset_update_metadata' pk=dataset.id %}">Edit Metadata</a>
    </div>
</div>

<c-accordion type='multiple' open="{'item-1': true, 'item-2': true, 'fetch': true}" class="mt-4">
    {% if dataset.fetch %}
    <c-accordion.item value='fetch'>
        <c-accordion.trigger value='fetch' class="text-2xl font-bold">Fetch</c-accordion.trigger>
        <c-accordion.content value='fetch'>
            <c-json-object-viewer :dict="dataset.fetch"></c-json-object-viewer>
        </c-accordion.content>
    </c-accordion.item>
    {% endif %}
    <c-accordion.item value='item-1'>
        <c-accordion.trigger value='item-1' class="text-2xl font-bold">Metadata</c-accordion.trigger>
        <c-accordion.content value='item-1'>
            <c-json-object-viewer :dict="dataset.metadata"></c-json-object-viewer>
        </c-accordion.content>
    </c-accordion.item>
    <c-accordion.item value='item-2'>
        <c-accordion.trigger value='item-2' class="text-2xl font-bold">Resources</c-accordion.trigger>
        <c-accordion.content value='item-2'>
            <c-navigation-menu class="mb-4">
                <c-navigation-menu.list class="items-center justify-start gap-8">
                    <c-navigation-menu.item>
                        <c-navigation-menu.link class="bg-secondary" href='{% url "datasets:resource_create" dataset_pk=dataset.pk %}'>
                            <i class="fas fa-plus"></i> Register new Resource
                        </c-navigation-menu.link>
                    </c-navigation-menu.item>
                </c-navigation-menu.list>
            </c-navigation-menu>
            {% render_table resource_table %}
        </c-accordion.content>
    </c-accordion.item>
</c-accordion>


{% endblock article %}
